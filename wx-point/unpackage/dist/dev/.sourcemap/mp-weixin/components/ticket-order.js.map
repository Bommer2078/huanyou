{"version":3,"sources":["webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/components/ticket-order.vue?234f","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/components/ticket-order.vue?b661","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/components/ticket-order.vue?2ae0","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/components/ticket-order.vue?2b88","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/components/ticket-order.vue","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/components/ticket-order.vue?8195","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/components/ticket-order.vue?f9a9"],"names":["name","props","item","type","Object","default","methods","intoDetail","uni","navigateTo","url","id","itemType","handleTap","status","startPay","that","login","success","res","code","params","orderId","$api","wxPay","then","data","payConfirm","$tip","toast","message","errMsg","obj","timeStamp","Date","getTime","paySign","nonce_str","prepay_id","requestPayment","String","nonceStr","package","signType","$emit","fail","err","console","log"],"mappings":"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","file":"components/ticket-order.js","sourcesContent":["import { render, staticRenderFns } from \"./ticket-order.vue?vue&type=template&id=86ef285c&\"\nimport script from \"./ticket-order.vue?vue&type=script&lang=js&\"\nexport * from \"./ticket-order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ticket-order.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\hugo-app\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('86ef285c', component.options)\n    } else {\n      api.reload('86ef285c', component.options)\n    }\n    module.hot.accept(\"./ticket-order.vue?vue&type=template&id=86ef285c&\", function () {\n      api.rerender('86ef285c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"hugo-project/my_self_project/huanyou/git/huanyou/wx-point/components/ticket-order.vue\"\nexport default component.exports","export * from \"-!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ticket-order.vue?vue&type=template&id=86ef285c&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$timeText(_vm.item.createTime)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ticket-order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ticket-order.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport md5 from '../libs/md5.min.js'\r\nexport default {\r\n    name: 'ticketOrder',\r\n    props: {\r\n        item: {\r\n            type: Object,\r\n            default: null\r\n        }\r\n    },\r\n    methods: {\r\n        intoDetail () {\r\n            uni.navigateTo({\r\n                url: `../orderDetail/orderDetail?orderId=${this.item.id}&orderType=${this.item.itemType}`\r\n            })\r\n        },\r\n        handleTap () {\r\n            if (this.item.status === 3) {\r\n                this.intoDetail()\r\n                return\r\n            }\r\n            if (this.item.status === 1) {\r\n                this.startPay()\r\n            }\r\n        },\r\n        startPay () {\r\n            let that = this\r\n            // 微信支付流程\r\n            uni.login({\r\n                success: function(res){ \r\n                    if(res.code) {\r\n                        let params = {\r\n                            code: res.code,\r\n                            orderId: that.item.id\r\n                        }\r\n                        // console.log(res.code)\r\n                        that.$api.wxPay(params).then((data) => {\r\n                            if (data.code === '0') {\r\n                                that.payConfirm(data.data)\r\n                            } else {\r\n                                that.$tip.toast(`${data.code},${data.message}`,'none')\r\n                            }\r\n                        })\r\n                    }else {\r\n                        that.$tip.toast(`获取微信jscode错误，请稍后重试${res.errMsg}`,'none')\r\n                    }          \r\n                }  \r\n            })\r\n        },    \r\n        payConfirm (obj) {\r\n            let timeStamp = new Date().getTime()\r\n            let paySign = `appId=wxd56c7ad09b4f58c7&nonceStr=${obj.nonce_str}&package=prepay_id=${obj.prepay_id}&signType=MD5&timeStamp=${timeStamp}&key=2A0D555A40FCF76A664C66CC424E22DC`\r\n            paySign = md5(paySign)\r\n            let that = this\r\n            uni.requestPayment({\r\n                timeStamp: String(timeStamp),\r\n                nonceStr: obj.nonce_str,\r\n                package: `prepay_id=${obj.prepay_id}`,\r\n                signType: 'MD5',\r\n                paySign: paySign,\r\n                success: function() {                    \r\n                    that.$tip.toast('支付成功','none') \r\n                    that.$emit('reflash') \r\n                },\r\n                fail: function(err) {  \r\n                    console.log(err)                      \r\n                    that.$tip.toast(`支付失败`,'none') \r\n                }\r\n            })\r\n        },  \r\n        // async payConfirmBack () {\r\n        //     let res = await this.$api.payConfirm(this.item.id)\r\n        //     if (res.code === '0') {\r\n        //         this.$tip.toast('支付成功','none')\r\n        //         this.$emit('reflash')\r\n        //     }\r\n        // }\r\n    },\r\n}\r\n","import mod from \"-!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ticket-order.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ticket-order.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}
