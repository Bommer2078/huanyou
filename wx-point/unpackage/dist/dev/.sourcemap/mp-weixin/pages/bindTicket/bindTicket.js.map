{"version":3,"sources":["webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/bindTicket/bindTicket.vue?3e6d","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/bindTicket/bindTicket.vue?cedc","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/bindTicket/bindTicket.vue?9671","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/bindTicket/bindTicket.vue?152c","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/bindTicket/bindTicket.vue","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/bindTicket/bindTicket.vue?7242","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/bindTicket/bindTicket.vue?0d95"],"names":["data","ticketCode","ticketPassword","imgUploading","headerImg","forbidClick","name","ticketName","filters","phoneText","val","arr","split","splice","join","onLoad","option","console","log","code","password","computed","methods","handlerCodeBlur","e","target","value","handlerPassword","bindTicket","checkForm","setTimeout","sendData","params","bindingName","bingingPhoto","childCode","username","userInfo","$api","res","$tip","toast","uni","switchTab","url","message","showWarning","confirm","then","uploadImg","catch","that","wx","chooseImage","count","sizeType","sourceType","success","tempFilePaths","uploadFile","filePath","res1","temp","JSON","parse","complete"],"mappings":"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","file":"pages/bindTicket/bindTicket.js","sourcesContent":["import { render, staticRenderFns } from \"./bindTicket.vue?vue&type=template&id=41e5f8f0&\"\nimport script from \"./bindTicket.vue?vue&type=script&lang=js&\"\nexport * from \"./bindTicket.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bindTicket.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\hugo-app\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('41e5f8f0', component.options)\n    } else {\n      api.reload('41e5f8f0', component.options)\n    }\n    module.hot.accept(\"./bindTicket.vue?vue&type=template&id=41e5f8f0&\", function () {\n      api.rerender('41e5f8f0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/bindTicket/bindTicket.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bindTicket.vue?vue&type=template&id=41e5f8f0&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"phoneText\")(_vm.userInfo.phone)\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bindTicket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bindTicket.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport { mapState } from 'vuex' \r\nexport default {\r\n    data() {\r\n        return {\r\n            ticketCode: '',\r\n            ticketPassword: '',\r\n            imgUploading: false,\r\n            headerImg: '',\r\n            forbidClick: false,\r\n            name: '',\r\n            ticketName: ''\r\n        }\r\n    },\r\n    filters: {\r\n        phoneText(val) {\r\n            let arr = val.split('')\r\n            return `${arr.splice(0,3).join('')}****${arr.splice(4,4).join('')}`\r\n        }\r\n    },\r\n    onLoad(option) {\r\n        console.log(option)\r\n        this.ticketCode = option.code || ''\r\n        this.ticketPassword = option.password || ''\r\n        this.ticketName = option.name || ''\r\n    },\r\n    computed: {        \r\n        ...mapState(['ticketBaseInfo','userInfo']),\r\n    },\r\n    methods: {\r\n        handlerCodeBlur (e) {\r\n            this.ticketCode = e.target.value\r\n        },\r\n        handlerPassword (e) {\r\n            this.ticketPassword = e.target.value\r\n        },\r\n        bindTicket() {\r\n            if (this.forbidClick) return\r\n            if (!this.checkForm()) return\r\n            this.forbidClick = true\r\n            setTimeout(() => {\r\n                this.sendData()\r\n            },200)            \r\n        },\r\n        async sendData () {\r\n            let params = {\r\n                bindingName: this.name,\r\n                bingingPhoto: this.headerImg,\r\n                childCode : this.ticketCode,\r\n                password : this.ticketPassword,\r\n                username: this.userInfo.username\r\n            }\r\n            const res = await this.$api.bindTicket(params)\r\n            if (res.code === '0') {\r\n                this.$tip.toast('绑定成功','none')\r\n                uni.switchTab({\r\n                    url: '/pages/user/user'\r\n                })\r\n            } else {\r\n                this.forbidClick = false\r\n                this.$tip.toast(res.message,'none')\r\n            }\r\n        },\r\n        checkForm () {\r\n            if (this.name === '') {\r\n                this.$tip.toast('请输入使用者名称','none')\r\n                return false\r\n            }\r\n            if (this.headerImg === '') {\r\n                this.$tip.toast('请上传头像','none')\r\n                return false\r\n            }\r\n            if (this.ticketCode === '') {\r\n                this.$tip.toast('请输入联票编号','none')\r\n                return false\r\n            }\r\n            if (this.ticketPassword === '') {\r\n                this.$tip.toast('请输入联票密码','none')\r\n                return false\r\n            }\r\n            if (this.imgUploading) {\r\n                this.$tip.toast('请等待头像上传完成','none')\r\n                return false\r\n            }\r\n            return true\r\n        },\r\n        showWarning () {\r\n            this.$tip.confirm('请使用真实头像，核验联票时会根据您绑定的头像与使用人进行对照')\r\n            .then((res) => {\r\n                this.uploadImg()\r\n            })\r\n            .catch(() => {\r\n                return\r\n            })\r\n        },\r\n        uploadImg () {\r\n            let that = this\r\n            wx.chooseImage({\r\n                count: 1,\r\n                sizeType: ['compressed'],\r\n                sourceType: ['album','camera'],\r\n                success (res) {\r\n                    const tempFilePaths = res.tempFilePaths\r\n                    that.imgUploading = true\r\n                    console.log(res)\r\n                    wx.uploadFile({\r\n                        // url: 'https://www.gzlxtx.cn:8080/common/uploadPhoto', //测试环境上传图片地址\r\n                        url: 'https://www.gzlxtx.cn/api/common/uploadPhoto', //正式环境上传图片地址\r\n                        filePath: tempFilePaths[0],\r\n                        name: 'file',\r\n                        success (res1) {\r\n                            let temp = JSON.parse(res1.data)\r\n                            if (temp.code === '0') {  \r\n                                that.headerImg = temp.data\r\n                                that.$tip.toast('头像上传成功','none')\r\n                            } else {\r\n                                that.$tip.toast(temp.message,'none')\r\n                            }\r\n                        },\r\n                        complete () {\r\n                            setTimeout(() => {                                        \r\n                                that.imgUploading = false\r\n                            }, 1000);                    \r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n","import mod from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bindTicket.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bindTicket.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}