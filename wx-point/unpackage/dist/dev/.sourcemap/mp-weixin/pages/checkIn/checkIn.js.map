<<<<<<< HEAD
{"version":3,"sources":["uni-app:///main.js",null,"webpack:///K:/project/huanyou/wx-point/pages/checkIn/checkIn.vue?1695","webpack:///K:/project/huanyou/wx-point/pages/checkIn/checkIn.vue?b7ff","webpack:///K:/project/huanyou/wx-point/pages/checkIn/checkIn.vue?1e50","uni-app:///pages/checkIn/checkIn.vue","webpack:///K:/project/huanyou/wx-point/pages/checkIn/checkIn.vue?81b9","webpack:///K:/project/huanyou/wx-point/pages/checkIn/checkIn.vue?1259"],"names":["createPage","Page"],"mappings":"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","file":"pages/checkIn/checkIn.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/checkIn/checkIn.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./checkIn.vue?vue&type=template&id=4239fc7a&\"\nvar renderjs\nimport script from \"./checkIn.vue?vue&type=script&lang=js&\"\nexport * from \"./checkIn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./checkIn.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"project/huanyou/wx-point/pages/checkIn/checkIn.vue\"\nexport default component.exports","export * from \"-!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=template&id=4239fc7a&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=script&lang=js&\"","<template>    \r\n    <view class=\"check-in-content\">\r\n        <view class=\"check-in-banner\">\r\n            <img class=\"bg\" src=\"/static/img/bannerBg.png\">\r\n            <view class=\"check-in-bottom\"></view>\r\n            <view class=\"check-in-container\">\r\n                <view class=\"check-in-header\">\r\n                    <image :src=\"currentTicketObj.bindingPhoto\" @click=\"clickImg\" mode=\"aspectFill\"></image>\r\n                    <text class=\"right\">{{currentTicketObj.bindingName}}</text>\r\n                    <!-- <view class=\"cancel-btn\" @click=\"cancelBind\">取消绑定</view> -->\r\n                    <view class=\"change-photo-btn\" :class=\"{'forbid-change-photo': currentTicketObj.verify}\" @click=\"preUploadImg\">修改照片</view>\r\n                </view>\r\n                <view class=\"check-in-body\">\r\n                    <view class=\"item\">\r\n                        <text class=\"left\">手机号码</text>\r\n                        <text class=\"right\">{{currentTicketObj.username}}</text>\r\n                    </view>\r\n                    <!-- <view class=\"item\">\r\n                        <text class=\"left\">有效时间</text>\r\n                        <text class=\"right\">2019.01.01-2020.01.01</text>\r\n                    </view> -->\r\n                    <view class=\"item\">\r\n                        <text class=\"left\">联票编码</text>\r\n                        <text class=\"right\">{{currentTicketObj.childCode}}</text>\r\n                    </view>\r\n                </view>\r\n            </view>           \r\n            <text class=\"tip\">* 点击头像可放大查看</text>         \r\n        </view>\r\n        <view class=\"QRcode\">\r\n             <img class=\"ticket-bg\" src=\"/static/img/checkTicket.png\">\r\n             <view class=\"QRcode-container\">\r\n                 <view class=\"QRcode-header\">\r\n                     <!-- <view class=\"title\" :class=\"{'has-icon' : showSwitchIcon}\" @click=\"switchCurrentTicketType\"> -->\r\n                     <view class=\"title\" @click=\"switchCurrentTicketType\">\r\n                        <text>\r\n                             {{currentTicketObj.itemName}}\r\n                        </text>\r\n                        <!-- <view class=\"switch-icon\" v-show=\"showSwitchIcon\">\r\n                            <image src=\"../../static/img/switch1.svg\"></image>\r\n                        </view> -->\r\n                    </view>\r\n                     <view class=\"code\">\r\n                         <text>密码</text>\r\n                         <text class=\"code-num\" hover-class=\"password-open\">{{currentTicketObj.password}}</text>\r\n                     </view>\r\n                 </view>\r\n                 <view class=\"QRcode-body\" @click=\"handleChangeQR\">\r\n                    <tki-qrcode size=\"360\" unit=\"upx\" background=\"transparent\" :onval=\"true\" @result=\"qrR\" :val=\"QRStr\"  ref=\"qrcode\"></tki-qrcode>\r\n                 </view>\r\n                 <view style=\"text-align: center\">{{currentTicket + 1}}/{{ticketList && ticketList.length}}</view>\r\n             </view>\r\n            <view class=\"left-btn\" @tap=\"goLeft\">\r\n                <text>上一张</text>\r\n            </view>\r\n            <view class=\"right-btn\" @tap=\"goRight\">                \r\n                <text>下一张</text>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    import tkiQrcode from \"../../components/tki-qrcode\"\r\n    import { mapState } from 'vuex'\r\n    import { upImgUrl } from '../../libs/envLib'\r\n    export default {\r\n        computed: {\r\n            ...mapState(['userInfo','ticketBaseInfo']),            \r\n            currentTicketObj() {\r\n                return this.ticketList[this.currentTicket]\r\n            },\r\n            showSwitchIcon () {\r\n                return this.ticketBaseInfo.id !== this.currentTicket.itemId\r\n            }\r\n        },\r\n        components: {tkiQrcode},\r\n        data() {\r\n            return {\r\n                ticketList: [],\r\n                currentTicket: 0,\r\n                currentTime: '',\r\n                timer: null,\r\n                QRStr: '',\r\n                isChange: false,\r\n                src: ''\r\n            }\r\n        },\r\n        onHide() {\r\n            uni.hideLoading()\r\n            clearInterval(this.timer)\r\n        },\r\n        onShow() {\r\n            this.hasLogin()\r\n            this.openTimer()\r\n        },\r\n        watch: {\r\n            currentTime() {                  \r\n                this.changeQR()\r\n            },\r\n            currentTicket () {                \r\n                this.changeQR()\r\n            }\r\n        },\r\n        methods: {  \r\n            qrR(res) {\r\n                this.src = res\r\n            },   \r\n            clickImg: function(){\r\n                var imgUrl = this.currentTicketObj.bindingPhoto;\r\n                uni.previewImage({\r\n                    urls: [imgUrl], //需要预览的图片http链接列表，注意是数组\r\n                    success: function (res) { },\r\n                    fail: function (res) { },\r\n                    complete: function (res) { },\r\n                })\r\n            }, \r\n            cancelBind () {\r\n                this.$tip.confirm('取消绑定后不可撤销，确认解绑么','确认')\r\n                .then((res) => {\r\n                    this.confimCancelBind()\r\n                })\r\n                .catch(() => {\r\n                    return\r\n                })\r\n            },\r\n            async changeBindPhoto (url) {\r\n                let params = {\r\n                    ticketId: this.currentTicketObj.id,\r\n                    photoUrl: url\r\n                }\r\n                const res = await this.$api.updateBindingPhoto(params)\r\n                if (res.code === '0') {\r\n                    this.getTicketList()\r\n                } else if (res.code === '60006') {                                       \r\n                    this.$tip.confirm(`此票已被使用,不能修改头像`,'知道了')\r\n                    .then(() => {\r\n                        return\r\n                    })\r\n                    .catch(() => {\r\n                        return\r\n                    })\r\n                } else {                    \r\n                    this.$tip.toast(`${res.message}`,'none')\r\n                }\r\n            },\r\n            async confimCancelBind () {                \r\n                let params = {\r\n                    bindingName: this.currentTicketObj.bindingName,\r\n                    bingingPhoto: this.currentTicketObj.bindingPhoto,\r\n                    childCode:this.currentTicketObj.childCode,\r\n                    password: this.currentTicketObj.password\r\n                }\r\n                const res = await this.$api.cancelBind(params)\r\n                if (res.code === '0') {\r\n                    this.$tip.toast('解绑成功','none') \r\n                    this.currentTicket = 0\r\n                    this.$nextTick(() => {\r\n                        this.getTicketList()\r\n                    })                      \r\n                } else {                    \r\n                    this.$tip.confirm(`解绑失败${res.code}，此票已被核销`,'知道了')\r\n                    .then(() => {\r\n                        return\r\n                    })\r\n                    .catch(() => {\r\n                        return\r\n                    })\r\n                }\r\n            },\r\n            hasLogin () {\r\n                let hasLogin = !!this.userInfo\r\n                if (!hasLogin) {\r\n                    this.bindLogin()\r\n                } else {                          \r\n                    this.getTicketList()              \r\n                }\r\n            },   \r\n            bindLogin() {\r\n                uni.reLaunch({\r\n                    url: '../login/login',\r\n                });\r\n            },   \r\n            creatQrcode() {\r\n                let temp = new Date()\r\n                this.currentTime = new Date().getTime()\r\n                this.$nextTick(() => {                    \r\n                    this.$refs.qrcode._makeCode()\r\n                })\r\n            },\r\n            openTimer() {                \r\n                //定时刷新\r\n                this.timer = setInterval(() => {\r\n                    this.currentTime = new Date().getTime()\r\n                },120000)\r\n            },\r\n            handleChangeQR () {\r\n                if (this.isChange) {\r\n                    return\r\n                }                \r\n                this.isChange = true\r\n                setTimeout(() => {\r\n                    this.isChange = false\r\n                },2000)\r\n                this.currentTime = new Date().getTime()\r\n            },\r\n            changeQR () {   \r\n                if (this.QRStr) {\r\n                    this.$refs.qrcode._clearCode()         \r\n                }\r\n                let code = this.currentTicketObj.childCode\r\n                let pcode = this.currentTicketObj.password\r\n                let un = this.currentTicketObj.username\r\n                let t = this.currentTime\r\n                let obj = {\r\n                    code,pcode,un,t\r\n                }\r\n                this.QRStr = JSON.stringify(obj)\r\n            },\r\n            goRight () {\r\n                if ( this.ticketList.length - 1 > this.currentTicket) {\r\n                    this.currentTicket++\r\n                } else {\r\n                    this.$tip.toast('没有更多了','none')\r\n                }\r\n            },\r\n            goLeft () {                \r\n                if ( this.currentTicket <= 0) {                    \r\n                    this.$tip.toast('没有更多了','none')\r\n                } else {\r\n                    this.currentTicket--\r\n                }\r\n            },\r\n            switchCurrentTicketType () {\r\n                // if (this.showSwitchIcon) {                    \r\n                //     this.$store.commit('SET_TICKET_OBJ',this.currentTicketObj)\r\n                // }\r\n            },    \r\n            preUploadImg() {  \r\n                if (this.currentTicketObj.verify) {                    \r\n                    this.$tip.alertDialog('此票已使用，不能修改头像','知道了').then(() => {\r\n                        return false\r\n                    })\r\n                    return\r\n                } \r\n                this.$tip.alertDialog('联票未使用前可修改照片，使用后不可修改','知道了').then(() => {\r\n                    this.uploadImg()\r\n                })\r\n            },\r\n            uploadImg () {\r\n                let that = this\r\n                wx.chooseImage({\r\n                    count: 1,\r\n                    sizeType: ['compressed'],\r\n                    sourceType: ['album','camera'],\r\n                    success (res) {\r\n                        const tempFilePaths = res.tempFilePaths\r\n                        that.imgUploading = true\r\n                        wx.uploadFile({\r\n                            url: upImgUrl,\r\n                            filePath: tempFilePaths[0],\r\n                            name: 'file',\r\n                            success (res1) {\r\n                                let temp = JSON.parse(res1.data)\r\n                                if (temp.code === '0') {  \r\n                                    that.changeBindPhoto(temp.data)\r\n                                } else {\r\n                                    that.$tip.toast(temp.message,'none')\r\n                                }\r\n                            },\r\n                            complete () {\r\n                                setTimeout(() => {                                        \r\n                                    that.imgUploading = false\r\n                                }, 1000);                    \r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            async getTicketList () {\r\n                let params = {\r\n                    pageNum: 1,\r\n                    pageSize: 100,\r\n                    username: this.userInfo.username\r\n                }\r\n                const res = await this.$api.bindTicketList(params)\r\n                if (res.code === '0') {\r\n                    if (res.data.list.length > 0) {\r\n                        this.ticketList = res.data.list\r\n                        setTimeout(() => {\r\n                            this.creatQrcode()\r\n                        }, 500);\r\n                    } else {\r\n                        this.$tip.toast('还未绑定联票,请先去绑定','none')\r\n                        uni.redirectTo({\r\n                            url: '/pages/bindTicket/bindTicket'\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n.check-in-content {\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    background: #F3F3F3;\r\n}\r\n.check-in-banner {\r\n    display: flex;\r\n    justify-content: center;\r\n    position: relative;\r\n    width: 100%;\r\n    height: 500upx;\r\n}\r\n.check-in-banner .tip{\r\n    position: absolute;\r\n    font-weight: 400;\r\n    font-size: 24upx;\r\n    top: 220upx;\r\n    left: 100upx;\r\n    color: #ccc;\r\n    opacity: 1;\r\n    z-index: 10;\r\n}\r\n.check-in-banner .bg{\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n}\r\n.check-in-bottom {    \r\n    position: absolute;\r\n    top: 50upx;\r\n    width: 86%;\r\n    height: 400upx;\r\n    border-radius: 8px;\r\n    background: #fff;\r\n    opacity: .9;\r\n    z-index: 1;\r\n    box-shadow:3px 2px 15px 1px rgba(0,0,0,0.07);\r\n}\r\n.check-in-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    position: absolute;\r\n    top: 50upx;\r\n    width: 86%;\r\n    height: 400upx;\r\n    border-radius: 8px;\r\n    z-index: 2;\r\n}\r\n.check-in-container .check-in-header {\r\n    width: 100%;\r\n    position: absolute;\r\n    top: -33upx;\r\n    overflow: hidden;\r\n    flex-shrink: 0;    \r\n    padding-left: 67upx;\r\n    overflow: hidden;\r\n}\r\n.check-in-container .check-in-header image{\r\n    width: 192upx;\r\n    height: 192upx;\r\n    opacity: 1;\r\n    vertical-align: middle;\r\n    border-radius: 16px;\r\n    margin-right: 19upx;\r\n}\r\n.check-in-container .check-in-header text {\r\n    font-weight: 700;\r\n    font-size: 36upx;\r\n}\r\n.check-in-body {\r\n    position: absolute;\r\n    bottom: 20upx;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 100%;\r\n    padding-left: 90upx;\r\n    padding-right: 100upx;\r\n}\r\n.check-in-body .item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    width: 100%;\r\n    margin-bottom: 30upx;\r\n    font-size: 14px;\r\n}\r\n.check-in-body .item .left {\r\n    color: #5F5F5F;\r\n    margin-right: 9upx;\r\n}\r\n.check-in-body .item .right {\r\n    display: inline-block;\r\n    width: 320upx;\r\n    height: 22px;\r\n    line-height: 22px;\r\n    background: #FFF4CA;\r\n    text-align: center;\r\n    border-radius: 4px;\r\n}\r\n.cancel-btn {\r\n    position: absolute;\r\n    top: 50upx;\r\n    right: -20upx;\r\n    width: 160upx;\r\n    height: 50upx;\r\n    background: linear-gradient(-53deg, #FF900E, #FFCC00);\r\n    border-radius: 25upx;\r\n    font-size: 26upx;\r\n    text-align: center;\r\n    color: #fff;\r\n    line-height: 50upx;\r\n}\r\n.forbid-change-photo {\r\n    opacity: 0.3;\r\n}\r\n.change-photo-btn {\r\n    position: absolute;\r\n    top: 120upx;\r\n    right: -20upx;\r\n    width: 160upx;\r\n    height: 50upx;\r\n    background: linear-gradient(-53deg, #FF900E, #FFCC00);\r\n    border-radius: 25upx;\r\n    font-size: 26upx;\r\n    text-align: center;\r\n    color: #fff;\r\n    line-height: 50upx;\r\n}\r\n.QRcode {\r\n    position: relative;\r\n    width: 576upx;\r\n    height: 612upx;\r\n    margin: 0 auto;\r\n    margin-bottom: 20upx;\r\n    border-radius: 17px;\r\n} \r\n.QRcode .ticket-bg{    \r\n    position: absolute;    \r\n    width: 576upx;\r\n    height: 612upx;\r\n}\r\n.QRcode-container {       \r\n    position: absolute; \r\n    padding-left: 20upx;   \r\n    padding-right: 20upx;   \r\n    padding-top: 20upx;   \r\n    width: 576upx;\r\n    height: 612upx;\r\n    z-index: 1;\r\n}\r\n.QRcode-container .QRcode-header {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-bottom: 22upx;\r\n}\r\n.QRcode-header .title text{\r\n    color:#5A4705;\r\n    font-size: 36upx;\r\n    color: #fff;\r\n    font-weight: 700;\r\n}\r\n.QRcode-header .title{\r\n    height: 75upx;\r\n    background: linear-gradient(360deg, #FF900E, #FFCC00);\r\n    border-radius: 4px;\r\n    text-align: center;\r\n    line-height: 75upx;\r\n    /* margin-top: -51upx; */\r\n    position: relative;\r\n    padding-left: 30upx;\r\n    padding-right: 30upx;\r\n    top: -50upx;\r\n}\r\n.QRcode-header .has-icon {\r\n    padding-right: 50upx;\r\n}\r\n.QRcode-header .code {\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 14px;\r\n    color: #000;\r\n    margin-bottom: 20upx;\r\n    position: relative;\r\n    bottom: 30upx;\r\n}\r\n.code .code-num {\r\n    display: inline-block;\r\n    width: 312upx;\r\n    height: 16px;\r\n    margin-left: 9px;\r\n    color: #390C0C;\r\n    text-align: center;\r\n    font-size: 0;\r\n    border-radius: 4px;\r\n    background: #e6e8fa;\r\n}\r\n.code .code-num:hover {    \r\n    font-size: 14px;\r\n    background: #FFF4CA;\r\n}\r\n.password-open{\r\n    font-size: 14px;\r\n    background: #FFF4CA;\r\n}\r\n.QRcode-container .QRcode-body {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 10upx;\r\n}\r\n.left-btn {\r\n    position: absolute;\r\n    width: 0;\r\n    height: 0;\r\n    top: 50%;\r\n    left: -90upx;\r\n    border-right: 14px solid #FFCB00;\r\n    border-top: 14px solid transparent;\r\n    border-left: 14px solid transparent;\r\n    border-bottom: 14px solid transparent;\r\n}\r\n.right-btn {\r\n    position: absolute;\r\n    width: 0;\r\n    height: 0;\r\n    top: 50%;\r\n    right: -90upx;\r\n    border-right: 14px solid transparent;\r\n    border-top: 14px solid transparent;\r\n    border-left: 14px solid #FFCB00;\r\n    border-bottom: 14px solid transparent;\r\n}\r\n.left-btn text,\r\n.right-btn text{\r\n    font-size: 12px;\r\n    word-break: keep-all;\r\n    position: absolute;\r\n    right: -8px;\r\n    bottom: -35px;\r\n}\r\n.left-btn text{\r\n    left: -8px;\r\n}\r\n.switch-icon {\r\n    position: absolute;\r\n    right: 20upx;\r\n    bottom: 20upx;\r\n    width: 20upx;\r\n    height: 20upx;\r\n    border-radius: 50%;\r\n    background: #fff;\r\n    justify-content: center;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.switch-icon image {\r\n    width: 80%;\r\n    height: 80%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608049181142\n      var cssReload = require(\"K:/app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/checkIn/checkIn.vue?b432","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/checkIn/checkIn.vue?c88d","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/checkIn/checkIn.vue?2faf","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/checkIn/checkIn.vue?9579","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/checkIn/checkIn.vue","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/checkIn/checkIn.vue?14aa","webpack:///E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/checkIn/checkIn.vue?3eea"],"names":["computed","currentTicketObj","ticketList","currentTicket","showSwitchIcon","ticketBaseInfo","id","itemId","components","tkiQrcode","data","currentTime","timer","QRStr","isChange","src","onHide","uni","hideLoading","clearInterval","onShow","hasLogin","openTimer","watch","changeQR","methods","qrR","res","clickImg","imgUrl","bindingPhoto","previewImage","urls","success","fail","complete","cancelBind","$tip","confirm","then","confimCancelBind","catch","changeBindPhoto","url","params","ticketId","photoUrl","$api","updateBindingPhoto","code","getTicketList","toast","message","bindingName","bingingPhoto","childCode","password","$nextTick","userInfo","bindLogin","reLaunch","creatQrcode","temp","Date","getTime","$refs","qrcode","_makeCode","setInterval","handleChangeQR","setTimeout","_clearCode","pcode","un","username","t","obj","JSON","stringify","goRight","length","goLeft","switchCurrentTicketType","preUploadImg","verify","alertDialog","uploadImg","that","wx","chooseImage","count","sizeType","sourceType","tempFilePaths","imgUploading","uploadFile","filePath","name","res1","parse","pageNum","pageSize","bindTicketList","list","redirectTo"],"mappings":"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","file":"pages/checkIn/checkIn.js","sourcesContent":["import { render, staticRenderFns } from \"./checkIn.vue?vue&type=template&id=4dd7df28&\"\nimport script from \"./checkIn.vue?vue&type=script&lang=js&\"\nexport * from \"./checkIn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./checkIn.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\hugo-app\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('4dd7df28', component.options)\n    } else {\n      api.reload('4dd7df28', component.options)\n    }\n    module.hot.accept(\"./checkIn.vue?vue&type=template&id=4dd7df28&\", function () {\n      api.rerender('4dd7df28', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/checkIn/checkIn.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=template&id=4dd7df28&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport tkiQrcode from \"../../components/tki-qrcode\"\nimport { mapState } from 'vuex'\nexport default {\n    computed: {\n        ...mapState(['userInfo','ticketBaseInfo']),            \n        currentTicketObj() {\n            return this.ticketList[this.currentTicket]\n        },\n        showSwitchIcon () {\n            return this.ticketBaseInfo.id !== this.currentTicket.itemId\n        }\n    },\n    components: {tkiQrcode},\n    data() {\n        return {\n            ticketList: [],\n            currentTicket: 0,\n            currentTime: '',\n            timer: null,\n            QRStr: '',\n            isChange: false,\n            src: ''\n        }\n    },\n    onHide() {\n        uni.hideLoading()\n        clearInterval(this.timer)\n    },\n    onShow() {\n        this.hasLogin()\n        this.openTimer()\n    },\n    watch: {\n        currentTime() {                  \n            this.changeQR()\n        },\n        currentTicket () {                \n            this.changeQR()\n        }\n    },\n    methods: {  \n        qrR(res) {\n            this.src = res\n        },   \n        clickImg: function(){\n            var imgUrl = this.currentTicketObj.bindingPhoto;\n            uni.previewImage({\n                urls: [imgUrl], //需要预览的图片http链接列表，注意是数组\n                success: function (res) { },\n                fail: function (res) { },\n                complete: function (res) { },\n            })\n        }, \n        cancelBind () {\n            this.$tip.confirm('取消绑定后不可撤销，确认解绑么','确认')\n            .then((res) => {\n                this.confimCancelBind()\n            })\n            .catch(() => {\n                return\n            })\n        },\n        async changeBindPhoto (url) {\n            let params = {\n                ticketId: this.currentTicketObj.id,\n                photoUrl: url\n            }\n            const res = await this.$api.updateBindingPhoto(params)\n            if (res.code === '0') {\n                this.getTicketList()\n            } else if (res.code === '60006') {                                       \n                this.$tip.confirm(`此票已被使用,不能修改头像`,'知道了')\n                .then(() => {\n                    return\n                })\n                .catch(() => {\n                    return\n                })\n            } else {                    \n                this.$tip.toast(`${res.message}`,'none')\n            }\n        },\n        async confimCancelBind () {                \n            let params = {\n                bindingName: this.currentTicketObj.bindingName,\n                bingingPhoto: this.currentTicketObj.bindingPhoto,\n                childCode:this.currentTicketObj.childCode,\n                password: this.currentTicketObj.password\n            }\n            const res = await this.$api.cancelBind(params)\n            if (res.code === '0') {\n                this.$tip.toast('解绑成功','none') \n                this.currentTicket = 0\n                this.$nextTick(() => {\n                    this.getTicketList()\n                })                      \n            } else {                    \n                this.$tip.confirm(`解绑失败${res.code}，此票已被核销`,'知道了')\n                .then(() => {\n                    return\n                })\n                .catch(() => {\n                    return\n                })\n            }\n        },\n        hasLogin () {\n            let hasLogin = !!this.userInfo\n            if (!hasLogin) {\n                this.bindLogin()\n            } else {                          \n                this.getTicketList()              \n            }\n        },   \n        bindLogin() {\n            uni.reLaunch({\n                url: '../login/login',\n            });\n        },   \n        creatQrcode() {\n            let temp = new Date()\n            this.currentTime = new Date().getTime()\n            this.$nextTick(() => {                    \n                this.$refs.qrcode._makeCode()\n            })\n        },\n        openTimer() {                \n            //定时刷新\n            this.timer = setInterval(() => {\n                this.currentTime = new Date().getTime()\n            },120000)\n        },\n        handleChangeQR () {\n            if (this.isChange) {\n                return\n            }                \n            this.isChange = true\n            setTimeout(() => {\n                this.isChange = false\n            },2000)\n            this.currentTime = new Date().getTime()\n        },\n        changeQR () {   \n            if (this.QRStr) {\n                this.$refs.qrcode._clearCode()         \n            }\n            let code = this.currentTicketObj.childCode\n            let pcode = this.currentTicketObj.password\n            let un = this.currentTicketObj.username\n            let t = this.currentTime\n            let obj = {\n                code,pcode,un,t\n            }\n            this.QRStr = JSON.stringify(obj)\n        },\n        goRight () {\n            if ( this.ticketList.length - 1 > this.currentTicket) {\n                this.currentTicket++\n            } else {\n                this.$tip.toast('没有更多了','none')\n            }\n        },\n        goLeft () {                \n            if ( this.currentTicket <= 0) {                    \n                this.$tip.toast('没有更多了','none')\n            } else {\n                this.currentTicket--\n            }\n        },\n        switchCurrentTicketType () {\n            // if (this.showSwitchIcon) {                    \n            //     this.$store.commit('SET_TICKET_OBJ',this.currentTicketObj)\n            // }\n        },    \n        preUploadImg() {  \n            if (this.currentTicketObj.verify) {                    \n                this.$tip.alertDialog('此票已使用，不能修改头像','知道了').then(() => {\n                    return false\n                })\n                return\n            } \n            this.$tip.alertDialog('联票未使用前可修改照片，使用后不可修改','知道了').then(() => {\n                this.uploadImg()\n            })\n        },\n        uploadImg () {\n            let that = this\n            wx.chooseImage({\n                count: 1,\n                sizeType: ['compressed'],\n                sourceType: ['album','camera'],\n                success (res) {\n                    const tempFilePaths = res.tempFilePaths\n                    that.imgUploading = true\n                    wx.uploadFile({\n                        // url: 'https://www.gzlxtx.cn:8080/common/uploadPhoto', //测试环境上传图片地址\n                        url: 'https://www.gzlxtx.cn/api/common/uploadPhoto', //正式环境上传图片地址\n                        filePath: tempFilePaths[0],\n                        name: 'file',\n                        success (res1) {\n                            let temp = JSON.parse(res1.data)\n                            if (temp.code === '0') {  \n                                that.changeBindPhoto(temp.data)\n                            } else {\n                                that.$tip.toast(temp.message,'none')\n                            }\n                        },\n                        complete () {\n                            setTimeout(() => {                                        \n                                that.imgUploading = false\n                            }, 1000);                    \n                        }\n                    })\n                }\n            })\n        },\n        async getTicketList () {\n            let params = {\n                pageNum: 1,\n                pageSize: 100,\n                username: this.userInfo.username\n            }\n            const res = await this.$api.bindTicketList(params)\n            if (res.code === '0') {\n                if (res.data.list.length > 0) {\n                    this.ticketList = res.data.list\n                    setTimeout(() => {\n                        this.creatQrcode()\n                    }, 500);\n                } else {\n                    this.$tip.toast('还未绑定联票,请先去绑定','none')\n                    uni.redirectTo({\n                        url: '/pages/bindTicket/bindTicket'\n                    })\n                }\n            }\n        }\n    }\n}\n","import mod from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./checkIn.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}
>>>>>>> 8a34d2cf607929a6835eb95ceff9ea5f6aa923b6
