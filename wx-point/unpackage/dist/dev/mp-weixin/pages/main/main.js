(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/main/main"],{

/***/ 20:
/*!****************************************************************************************!*\
  !*** E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/main/main.vue ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _main_vue_vue_type_template_id_694f4620___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main.vue?vue&type=template&id=694f4620& */ 21);
/* harmony import */ var _main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./main.vue?vue&type=script&lang=js& */ 23);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./main.vue?vue&type=style&index=0&lang=css& */ 28);
/* harmony import */ var _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */ 10);






/* normalize component */

var component = Object(_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _main_vue_vue_type_template_id_694f4620___WEBPACK_IMPORTED_MODULE_0__["render"],
  _main_vue_vue_type_template_id_694f4620___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/main/main.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 21:
/*!***********************************************************************************************************************!*\
  !*** E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/main/main.vue?vue&type=template&id=694f4620& ***!
  \***********************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_template_id_694f4620___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=694f4620& */ 22);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_template_id_694f4620___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_template_id_694f4620___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ 22:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/main/main.vue?vue&type=template&id=694f4620& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  var l0 = _vm.__map(_vm.venueArr, function(item, __i2__) {
    var f0 = _vm._f("rulesText")(item)

    return {
      $orig: _vm.__get_orig(item),
      f0: f0
    }
  })

  _vm.$mp.data = Object.assign(
    {},
    {
      $root: {
        l0: l0
      }
    }
  )
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 23:
/*!*****************************************************************************************************************!*\
  !*** E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/main/main.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js& */ 24);
/* harmony import */ var _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 24:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/main/main.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _regenerator = _interopRequireDefault(__webpack_require__(/*! ./node_modules/@babel/runtime/regenerator */ 25));












































































































var _vuex = __webpack_require__(/*! vuex */ 12);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);}_next(undefined);});};}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};var ownKeys = Object.keys(source);if (typeof Object.getOwnPropertySymbols === 'function') {ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {return Object.getOwnPropertyDescriptor(source, sym).enumerable;}));}ownKeys.forEach(function (key) {_defineProperty(target, key, source[key]);});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var choseTicketList = function choseTicketList() {return __webpack_require__.e(/*! import() | components/choseTicketList */ "components/choseTicketList").then(__webpack_require__.bind(null, /*! ../../components/choseTicketList */ 194));};var checkinBox = function checkinBox() {return __webpack_require__.e(/*! import() | components/checkinBox */ "components/checkinBox").then(__webpack_require__.bind(null, /*! ../../components/checkinBox */ 201));};var _default =


{
  data: function data() {
    return {
      venueArr: [],
      goodsArr: [],
      phoneCall: '4006099109',
      showTicketList: false,
      showCheckinBox: false,
      ticketList: [],
      versionToLow: true,
      userTicketList: [],
      userFootprint: [],
      tempUserObj: null,
      boxInfo: null,
      forbidChangeUser: false,
      currentUserTicket: null,
      getUserRecordDone: false,
      getVenueDataDone: false,
      currentTicketIndex: 0 };

  },
  components: {
    choseTicketList: choseTicketList,
    checkinBox: checkinBox },

  computed: _objectSpread({},
  (0, _vuex.mapState)(['locationObj', 'ticketBaseInfo', 'venueTypeArr', 'roleType', 'userInfo']), {
    showHeaderLayOut: function showHeaderLayOut() {
      return this.userTicketList.length > 0;
    },
    showSwitchBtn: function showSwitchBtn() {
      return this.ticketList && this.ticketList[this.currentTicketIndex] && this.ticketList[this.currentTicketIndex].id !== this.ticketBaseInfo.id;
    } }),

  watch: {
    getUserRecordDone: function getUserRecordDone(newVal) {
      if (this.getVenueDataDone && newVal) {
        this.calcVenueRecord();
      }
    },
    getVenueDataDone: function getVenueDataDone(newVal) {
      if (this.getUserRecordDone && newVal) {
        this.calcVenueRecord();
      }
    } },

  created: function created() {
    // uni.setEnableDebug({            
    //     enableDebug: true            
    // })
    if (this.roleType === 'business') {
      uni.reLaunch({
        url: '/pages/business/business' });

      return;
    }
    this.getVenueTypeList();
  },
  onShow: function onShow() {
    uni.showShareMenu({});
    this.getWxvison();
  },
  onShareAppMessage: function onShareAppMessage(options) {
    return this.$commenShare();
  },
  methods: {
    handleBannerChange: function handleBannerChange(obj) {
      this.currentTicketIndex = obj.detail.current;
    },
    getWxvison: function getWxvison() {var _this = this;
      wx.getSystemInfo({
        success: function success(res) {
          var version = res.version.split('.');
          console.log(res);
          _this.versionToLow = version[0] < 7;
          console.log(version[0]);
          _this.initGlobalData();
        },
        fail: function fail(err) {
          console.log(err);
          _this.initGlobalData();
        } });

    },
    choseLocation: function choseLocation() {
      uni.navigateTo({
        url: '/pages/locationChose/locationChose' });

    },
    choseTicket: function choseTicket(obj) {
      this.$store.commit('SET_TICKET_OBJ', obj);
      this.getRestData();
      this.showTicketList = false;
    },
    initGlobalData: function () {var _initGlobalData = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee() {var _this2 = this;var res1;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:if (!(

                !this.locationObj || !this.locationObj.id)) {_context.next = 14;break;}_context.next = 3;return (
                  this.$api.getPlaceList());case 3:res1 = _context.sent;if (!(
                res1.code === '0')) {_context.next = 12;break;}
                this.locationArr = res1.data;if (!
                this.versionToLow) {_context.next = 11;break;}
                this.$tip.toast('微信版本过低，建议升级', 'none');
                this.$store.commit('SET_LOCATION_OBJ', this.locationArr[0]);
                this.getTicketList();return _context.abrupt("return");case 11:


                wx.getLocation({
                  success: function success(res) {
                    // 引入第三方地图获取地址名称
                    _this2.getLocal(res.latitude, res.longitude).
                    then(function (userLocation) {
                      var tempLocation = _this2.locationArr.find(function (item) {
                        return item.name === userLocation;
                      });
                      // 如果没有则获取用户的地址信息 --> 对比已有城市进行跳转，否则跳转默认城市
                      _this2.$store.commit('SET_LOCATION_OBJ', tempLocation || _this2.locationArr[0]);
                      _this2.getTicketList();
                    }).
                    catch(function () {
                      _this2.$store.commit('SET_LOCATION_OBJ', _this2.locationArr[0]);
                      _this2.getTicketList();
                    });
                  },
                  fail: function fail(err) {
                    console.log(err);
                    _this2.$store.commit('SET_LOCATION_OBJ', _this2.locationArr[0]);
                    _this2.getTicketList();
                  } });case 12:_context.next = 15;break;case 14:



                this.getTicketList();case 15:case "end":return _context.stop();}}}, _callee, this);}));function initGlobalData() {return _initGlobalData.apply(this, arguments);}return initGlobalData;}(),


    getLocal: function getLocal(lat, lon) {var _this3 = this;
      if (this.$qqmapsdk) {
        var val = new Promise(
        function (resolve, reject) {
          _this3.$qqmapsdk.reverseGeocoder({
            location: {
              latitude: lat,
              longitude: lon },

            success: function success(res) {
              console.log(res);
              var city = res && res.result && res.result.address_component && res.result.address_component.city;
              if (city) {
                city = city.substring(0, city.length - 1);
                resolve(city);
              }
              resolve(city);
            },
            fail: function fail(err) {
              console.log(err);
              reject('');
            } });

        });

        return val;
      }
    },
    getTicketList: function () {var _getTicketList = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee2() {var _this4 = this;var params, res2, tempArr, temp;return _regenerator.default.wrap(function _callee2$(_context2) {while (1) {switch (_context2.prev = _context2.next) {case 0:
                params = {
                  pageNum: 1,
                  pageSize: 10,
                  placeId: this.locationObj.id };_context2.next = 3;return (

                  this.$api.getTickeList(params));case 3:res2 = _context2.sent;
                if (res2.code === '0') {
                  tempArr = res2.data.list.filter(function (item) {
                    return item.status === 1;
                  });
                  this.ticketList = tempArr;
                  if (this.ticketList.length === 1) {
                    this.$store.commit('SET_TICKET_OBJ', this.ticketList[0]);
                    this.getRestData();
                  } else if (this.ticketBaseInfo && this.ticketBaseInfo.id) {
                    temp = this.ticketList.find(function (item) {
                      return item.id === _this4.ticketBaseInfo.id;
                    });
                    if (temp) {
                      this.getRestData();
                    } else {
                      this.showTicketList = true;
                    }
                  } else if (this.ticketList.length > 1) {
                    this.showTicketList = true;
                  }
                }case 5:case "end":return _context2.stop();}}}, _callee2, this);}));function getTicketList() {return _getTicketList.apply(this, arguments);}return getTicketList;}(),

    getRestData: function getRestData() {
      this.getUserTicketList();
      this.getGoodsData();
      this.getVenueData();
    },
    getUserTicketList: function () {var _getUserTicketList = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee3() {var _this5 = this;var params, res;return _regenerator.default.wrap(function _callee3$(_context3) {while (1) {switch (_context3.prev = _context3.next) {case 0:if (!(
                !this.userInfo || !String(this.userInfo.username))) {_context3.next = 2;break;}return _context3.abrupt("return");case 2:
                params = {
                  pageNum: 1,
                  pageSize: 100,
                  username: this.userInfo.username };_context3.next = 5;return (

                  this.$api.bindTicketList(params));case 5:res = _context3.sent;
                if (res.code === '0') {
                  if (res.data.list.length > 0) {
                    this.userTicketList = res.data.list.filter(function (item) {
                      return item.itemId === _this5.ticketBaseInfo.id;
                    });
                    if (this.userTicketList.length > 0) {
                      this.changeCurrentUserTicket(this.userTicketList[0]);
                    }
                  } else {
                    this.userTicketList = [];
                  }
                }case 7:case "end":return _context3.stop();}}}, _callee3, this);}));function getUserTicketList() {return _getUserTicketList.apply(this, arguments);}return getUserTicketList;}(),

    getVenueData: function () {var _getVenueData = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee4() {var params, res;return _regenerator.default.wrap(function _callee4$(_context4) {while (1) {switch (_context4.prev = _context4.next) {case 0:
                params = {
                  yearTicketId: this.ticketBaseInfo.id,
                  pageNum: 1,
                  pageSize: 10 };_context4.next = 3;return (

                  this.$api.getVenueList(params));case 3:res = _context4.sent;
                if (res.code === '0') {
                  this.venueArr = res.data.list;
                  this.getVenueDataDone = true;
                }case 5:case "end":return _context4.stop();}}}, _callee4, this);}));function getVenueData() {return _getVenueData.apply(this, arguments);}return getVenueData;}(),

    getGoodsData: function () {var _getGoodsData = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee5() {var params, res;return _regenerator.default.wrap(function _callee5$(_context5) {while (1) {switch (_context5.prev = _context5.next) {case 0:
                params = {
                  pageNum: 1,
                  pageSize: 10,
                  status: 1 };_context5.next = 3;return (

                  this.$api.getGoodsList(params));case 3:res = _context5.sent;
                if (res.code === '0') {
                  this.goodsArr = res.data.list;
                }case 5:case "end":return _context5.stop();}}}, _callee5, this);}));function getGoodsData() {return _getGoodsData.apply(this, arguments);}return getGoodsData;}(),

    getVenueTypeList: function () {var _getVenueTypeList = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee6() {var res;return _regenerator.default.wrap(function _callee6$(_context6) {while (1) {switch (_context6.prev = _context6.next) {case 0:_context6.next = 2;return (
                  this.$api.getVenueTypeList());case 2:res = _context6.sent;
                if (res.code === '0') {
                  this.$store.commit('SET_VENUE_TYPE_ARR', res.data);
                }case 4:case "end":return _context6.stop();}}}, _callee6, this);}));function getVenueTypeList() {return _getVenueTypeList.apply(this, arguments);}return getVenueTypeList;}(),

    gotoSearchPage: function gotoSearchPage() {
      uni.navigateTo({
        url: '/pages/searchPage/searchPage' });

    },
    intoVenueDetail: function intoVenueDetail(item) {
      var tempStr = this.$options.filters['rulesText'](item);
      uni.navigateTo({
        url: "/pages/venueDetail/venueDetail?id=".concat(item.id, "&str=").concat(tempStr) });

    },
    intoAppoinment: function intoAppoinment(id) {
      uni.navigateTo({
        url: "/pages/appointmentPage/appointmentPage?id=".concat(id) });

    },
    intoTicket: function intoTicket() {
      uni.switchTab({
        url: "/pages/ticket/ticket" });

    },
    switchTicket: function switchTicket() {
      this.$store.commit('SET_TICKET_OBJ', this.ticketList[this.currentTicketIndex]);
      this.getRestData();
    },
    gotoGoods: function gotoGoods(item) {
      uni.navigateTo({
        url: "/pages/goodsDetail/goodsDetail?id=".concat(item.id) });

    },
    gotoMoreVenue: function gotoMoreVenue() {
      uni.navigateTo({
        url: '../venueList/venueList' });

    },
    callPhone: function callPhone() {
      var phoneCall = [this.phoneCall];
      uni.showActionSheet({
        itemList: [phoneCall[0]],
        success: function success(res) {
          console.log(res);
          wx.makePhoneCall({
            phoneNumber: phoneCall[res.tapIndex],
            success: function success() {
              console.log("拨打电话成功！");
            },
            fail: function fail() {
              console.log("拨打电话失败！");
            } });

        },
        fail: function fail(res) {
          console.log(res.errMsg);
        } });

    },
    handleClickHead: function handleClickHead(obj) {var _this6 = this;
      var nowTime = new Date().getTime();
      var temp = {
        id: obj.id,
        time: nowTime };

      var flag = this.tempUserObj && this.tempUserObj.id === temp.id && temp.time - this.tempUserObj.time < 500;
      if (flag) {
        // 双击
        console.log('双击');
        this.tempUserObj = null;
        if (this.forbidChangeUser) {
          this.$tip.toast('请求加载中，请稍后重试', 'none');
        } else {
          this.boxInfo = obj;
          this.showCheckinBox = true;
        }
      } else {
        this.tempUserObj = temp;
      }
      setTimeout(function () {
        if (_this6.tempUserObj) {
          _this6.tempUserObj = null;
          console.log('单击');
          _this6.changeCurrentUserTicket(obj);
        }
      }, 500);
    },
    changeCurrentUserTicket: function changeCurrentUserTicket(obj) {
      if (this.currentUserTicket && this.currentUserTicket.id === obj.id) return;
      if (this.showCheckinBox || this.forbidChangeUser) {
        this.$tip.toast('请求加载中，请稍后重试', 'none');
        return;
      }
      this.forbidChangeUser = true;
      this.currentUserTicket = obj;
      this.getUserRecord();
    },
    getUserRecord: function () {var _getUserRecord = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee7() {var params, res;return _regenerator.default.wrap(function _callee7$(_context7) {while (1) {switch (_context7.prev = _context7.next) {case 0:
                params = {
                  pageNo: 1,
                  pageSize: 100,
                  verifyUsername: this.userInfo.username };_context7.next = 3;return (

                  this.$api.getFootprint(params));case 3:res = _context7.sent;
                if (res.code === '0') {
                  if (this.getUserRecordDone) {
                    this.calcVenueRecord();
                  } else {
                    this.getUserRecordDone = true;
                  }
                  this.forbidChangeUser = false;
                  this.userFootprint = res.data.list;
                }case 5:case "end":return _context7.stop();}}}, _callee7, this);}));function getUserRecord() {return _getUserRecord.apply(this, arguments);}return getUserRecord;}(),

    calcVenueRecord: function calcVenueRecord() {var _this7 = this;
      var ticketId = this.ticketBaseInfo.id;
      var ticketRecordArr = this.userFootprint.filter(function (item) {
        return item.itemId === ticketId;
      });
      var userRecordArr = ticketRecordArr.filter(function (item) {
        return _this7.currentUserTicket.id === item.ticketId;
      });var _loop = function _loop(
      i) {
        var temp = userRecordArr.find(function (item) {
          return item.venueId === _this7.venueArr[i].id;
        });
        if (temp) {
          _this7.venueArr[i].showFoot = true;
        } else {
          _this7.venueArr[i].showFoot = false;
        }};for (var i = 1; i < this.venueArr.length; i++) {_loop(i);
      }
    },
    closeBox: function closeBox(obj) {
      this.showCheckinBox = false;
    } } };exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["default"]))

/***/ }),

/***/ 28:
/*!*************************************************************************************************************************!*\
  !*** E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/main/main.vue?vue&type=style&index=0&lang=css& ***!
  \*************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/css-loader??ref--6-oneOf-1-2!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../../../hugo-app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css& */ 29);
/* harmony import */ var _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_hugo_app_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_main_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 29:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/hugo-project/my_self_project/huanyou/git/huanyou/wx-point/pages/main/main.vue?vue&type=style&index=0&lang=css& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ })

},[[19,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/main/main.js.map